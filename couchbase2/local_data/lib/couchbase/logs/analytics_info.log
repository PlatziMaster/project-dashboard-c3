2020-06-16T21:33:37.686+00:00 WARN CBAS.cbas Updating log level to DEBUG
2020-06-16T21:33:37.695+00:00 INFO CBAS.cbas ++++++++++++ starting cbas main ++++++++++++
2020-06-16T21:33:37.706+00:00 INFO CBAS.cbas uuid: a771316973056c9759aee152c7c79f8b
2020-06-16T21:33:37.729+00:00 INFO CBAS.cbas a single io device was provided; auto-adjusting...
2020-06-16T21:33:37.736+00:00 INFO CBAS.cbas configuring io devices based on available memory (1024): 1
2020-06-16T21:33:37.736+00:00 INFO CBAS.cbas io devices were adjusted to a total of: 1
2020-06-16T21:33:37.798+00:00 INFO CBAS.cbas initialized cluster encryption with data encryption as false
2020-06-16T21:33:37.799+00:00 INFO CBAS.cbas initializing audit service at: http://127.0.0.1:8091
2020-06-16T21:33:37.857+00:00 INFO CBAS.cbas Using plain authentication for user <ud>@cbas</ud> 
2020-06-16T21:33:37.860+00:00 INFO CBAS.cbas Using plain authentication for user <ud>@cbas</ud> 
2020-06-16T21:33:37.864+00:00 INFO CBAS.cbas Using plain authentication for user <ud>@cbas</ud> 
2020-06-16T21:33:37.867+00:00 INFO CBAS.cbas Using plain authentication for user <ud>@cbas</ud> 
2020-06-16T21:33:37.871+00:00 INFO CBAS.cbas Using plain authentication for user <ud>@cbas</ud> 
2020-06-16T21:33:37.871+00:00 INFO CBAS.cbas audit: created new audit service
2020-06-16T21:33:37.888+00:00 INFO CBAS.cbas clusterCompatibility init'd to 393221
2020-06-16T21:33:37.890+00:00 INFO CBAS.cbas setting java.home to bundled jre (/opt/couchbase/lib/cbas/runtime)
2020-06-16T21:33:38.342+00:00 WARN CBAS.cbas config has been refreshed by ns server. New value 3
2020-06-16T21:33:38.342+00:00 WARN CBAS.cbas cluster encryption has been refreshed by ns server
2020-06-16T21:33:38.342+00:00 WARN CBAS.cbas tls config has been refreshed by ns server
2020-06-16T21:33:39.704+00:00 INFO CBAS.cbas Initialized starting partitionId to 0 for node a771316973056c9759aee152c7c79f8b
2020-06-16T21:33:39.704+00:00 INFO CBAS.cbas Initialized controllerId to 0 for node a771316973056c9759aee152c7c79f8b
2020-06-16T21:33:39.720+00:00 INFO CBAS.cbas no CC / Metadata node defined in metakv- will pick *this* node, a771316973056c9759aee152c7c79f8b
2020-06-16T21:33:39.731+00:00 INFO CBAS.cbas our node is within topology refresh bb4865b95ea66ce628f695b470cb4f77/1; ensuring driver is running...
2020-06-16T21:33:39.731+00:00 INFO CBAS.cbas my node is in topology but not registered in cbauth db; sleeping for 2s before trying again...
2020-06-16T21:33:41.732+00:00 INFO CBAS.cbas analytics driver exited; restarting
2020-06-16T21:33:41.745+00:00 INFO CBAS.cbas allocating 435mb/871mb for heap min/max (reserved 153mb of 1024mb service quota for jvm overhead) 
2020-06-16T21:33:41.745+00:00 INFO CBAS.cbas nodeConfigMap: map[analyticsHttpListenPort:8095 messagingListenPort:9118 metadataNode:a771316973056c9759aee152c7c79f8b defaultDir:/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0 analyticsSslEnabled:true iodevices:[/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0] clusterCompatibility:393221 initialRun:false ccControllerId:0 ccHeartbeatPeriod:30000 analyticsHttpListenAddress:0.0.0.0 analyticsHttpAdminListenPort:9110 replicationLogBufferPagesize:262144 metadataCallbackPort:9119 cbasAddress:127.0.0.1 publicAddress:127.0.0.1 ccAddress:0.0.0.0 ccPublicAddress:127.0.0.1 ccHeartbeatMaxMisses:4 analyticsHttpsListenPort:18095 metadataListenPort:9121 analyticsCbHome:/opt/couchbase ncservicePort:-1 analyticsHttpsListenAddress:0.0.0.0 ccClusterListenPort:9112 nsServerPort:8091 clusterAddress:127.0.0.1 replicationEnabled:true startingPartitionId:0 logDir:/opt/couchbase/var/lib/couchbase/logs analyticsNodeName:127.0.0.1:8091 analyticsCcHttpPort:9111 replicationFactor:4096 replicationStrategy:metadata sslEnabled:false ccClientListenPort:9113 ccConsoleListenPort:9114 nsServerAddress:127.0.0.1 nsServerSslPort:18091 ccSslEnabled:false ccAnalyticsHttpListenPort:9111 clusterPort:9112 resultListenPort:9117 address:0.0.0.0 txnLogBufferPagesize:262144 productVersion:6.5.1-6299 additionalCcNodes:[] clusterListenPort:9115 dataListenPort:9116 cbasPort:9122 replicationListenPort:9120 ccAnalyticsMetadataPartitionId:0]
2020-06-16T21:33:41.772+00:00 INFO CBAS.cbas running /opt/couchbase/lib/cbas/runtime/bin/java args:[-XX:+ExitOnOutOfMemoryError -XX:MaxGCPauseMillis=60000 -XX:+UseParallelGC -Xms435m -Xmx871m -Dfile.encoding=UTF-8 -Djava.io.tmpdir=/opt/couchbase/var/lib/couchbase/tmp -Djava.net.preferIPv4Stack=true -Djava.net.preferIPv6Addresses=false --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED --add-opens=java.management/sun.management=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED -Dproduct.version=6.5.1-6299 -DlogRolloverThresholdBytes=41943040 -DlogRolloverMaxFiles=10 -Dnetworkaddress.cache.ttl=15 -DlogDir=/opt/couchbase/var/lib/couchbase/logs -cp /opt/couchbase/lib/cbas/repo/algebricks-common.jar:/opt/couchbase/lib/cbas/repo/algebricks-compiler.jar:/opt/couchbase/lib/cbas/repo/algebricks-core.jar:/opt/couchbase/lib/cbas/repo/algebricks-data.jar:/opt/couchbase/lib/cbas/repo/algebricks-rewriter.jar:/opt/couchbase/lib/cbas/repo/algebricks-runtime.jar:/opt/couchbase/lib/cbas/repo/args4j-2.33.jar:/opt/couchbase/lib/cbas/repo/asterix-active.jar:/opt/couchbase/lib/cbas/repo/asterix-algebra.jar:/opt/couchbase/lib/cbas/repo/asterix-app.jar:/opt/couchbase/lib/cbas/repo/asterix-common.jar:/opt/couchbase/lib/cbas/repo/asterix-external-data.jar:/opt/couchbase/lib/cbas/repo/asterix-lang-aql.jar:/opt/couchbase/lib/cbas/repo/asterix-lang-common.jar:/opt/couchbase/lib/cbas/repo/asterix-lang-sqlpp.jar:/opt/couchbase/lib/cbas/repo/asterix-metadata.jar:/opt/couchbase/lib/cbas/repo/asterix-om.jar:/opt/couchbase/lib/cbas/repo/asterix-replication.jar:/opt/couchbase/lib/cbas/repo/asterix-runtime.jar:/opt/couchbase/lib/cbas/repo/asterix-transactions.jar:/opt/couchbase/lib/cbas/repo/bcpkix-jdk15on-1.64.jar:/opt/couchbase/lib/cbas/repo/bcprov-jdk15on-1.64.jar:/opt/couchbase/lib/cbas/repo/cbas-common.jar:/opt/couchbase/lib/cbas/repo/cbas-connector.jar:/opt/couchbase/lib/cbas/repo/cbas-dcp-client.jar:/opt/couchbase/lib/cbas/repo/cbas-server.jar:/opt/couchbase/lib/cbas/repo/commons-codec-1.14.jar:/opt/couchbase/lib/cbas/repo/commons-collections4-4.4.jar:/opt/couchbase/lib/cbas/repo/commons-compress-1.19.jar:/opt/couchbase/lib/cbas/repo/commons-io-2.6.jar:/opt/couchbase/lib/cbas/repo/commons-lang3-3.9.jar:/opt/couchbase/lib/cbas/repo/commons-logging-1.2.jar:/opt/couchbase/lib/cbas/repo/commons-text-1.8.jar:/opt/couchbase/lib/cbas/repo/core-io-1.7.10.jar:/opt/couchbase/lib/cbas/repo/disruptor-1.2.15-jdk8.jar:/opt/couchbase/lib/cbas/repo/error_prone_annotations-2.3.4.jar:/opt/couchbase/lib/cbas/repo/esri-geometry-api-2.0.0.jar:/opt/couchbase/lib/cbas/repo/failureaccess-1.0.1.jar:/opt/couchbase/lib/cbas/repo/fastutil-8.3.0.jar:/opt/couchbase/lib/cbas/repo/guava-28.2-jre.jar:/opt/couchbase/lib/cbas/repo/httpclient-4.5.11.jar:/opt/couchbase/lib/cbas/repo/httpcore-4.4.13.jar:/opt/couchbase/lib/cbas/repo/hyracks-api.jar:/opt/couchbase/lib/cbas/repo/hyracks-client.jar:/opt/couchbase/lib/cbas/repo/hyracks-comm.jar:/opt/couchbase/lib/cbas/repo/hyracks-control-cc.jar:/opt/couchbase/lib/cbas/repo/hyracks-control-common.jar:/opt/couchbase/lib/cbas/repo/hyracks-control-nc.jar:/opt/couchbase/lib/cbas/repo/hyracks-data-std.jar:/opt/couchbase/lib/cbas/repo/hyracks-dataflow-common.jar:/opt/couchbase/lib/cbas/repo/hyracks-dataflow-std.jar:/opt/couchbase/lib/cbas/repo/hyracks-http.jar:/opt/couchbase/lib/cbas/repo/hyracks-ipc.jar:/opt/couchbase/lib/cbas/repo/hyracks-net.jar:/opt/couchbase/lib/cbas/repo/hyracks-storage-am-bloomfilter.jar:/opt/couchbase/lib/cbas/repo/hyracks-storage-am-btree.jar:/opt/couchbase/lib/cbas/repo/hyracks-storage-am-common.jar:/opt/couchbase/lib/cbas/repo/hyracks-storage-am-lsm-btree.jar:/opt/couchbase/lib/cbas/repo/hyracks-storage-am-lsm-common.jar:/opt/couchbase/lib/cbas/repo/hyracks-storage-am-lsm-invertedindex.jar:/opt/couchbase/lib/cbas/repo/hyracks-storage-am-lsm-rtree.jar:/opt/couchbase/lib/cbas/repo/hyracks-storage-am-rtree.jar:/opt/couchbase/lib/cbas/repo/hyracks-storage-common.jar:/opt/couchbase/lib/cbas/repo/hyracks-util.jar:/opt/couchbase/lib/cbas/repo/ini4j-0.5.4.jar:/opt/couchbase/lib/cbas/repo/jackson-annotations-2.10.3.jar:/opt/couchbase/lib/cbas/repo/jackson-core-2.10.3.jar:/opt/couchbase/lib/cbas/repo/jackson-databind-2.10.3.jar:/opt/couchbase/lib/cbas/repo/log4j-api-2.13.1.jar:/opt/couchbase/lib/cbas/repo/log4j-core-2.13.1.jar:/opt/couchbase/lib/cbas/repo/log4j-jcl-2.13.1.jar:/opt/couchbase/lib/cbas/repo/log4j-jul-2.13.1.jar:/opt/couchbase/lib/cbas/repo/log4j-slf4j-impl-2.13.1.jar:/opt/couchbase/lib/cbas/repo/log4j-web-2.13.1.jar:/opt/couchbase/lib/cbas/repo/netty-all-4.1.46.Final.jar:/opt/couchbase/lib/cbas/repo/netty-tcnative-boringssl-static-2.0.29.Final.jar:/opt/couchbase/lib/cbas/repo/opentracing-api-0.31.0.jar:/opt/couchbase/lib/cbas/repo/rxjava-1.3.8.jar:/opt/couchbase/lib/cbas/repo/slf4j-api-1.7.25.jar:/opt/couchbase/lib/cbas/repo/snappy-java-1.1.7.1.jar:/opt/couchbase/lib/cbas/repo/tpcds-1.2.jar com.couchbase.analytics.control.AnalyticsDriver --jsonconfig /opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/config.json --nc -node-id a771316973056c9759aee152c7c79f8b --cc]
2020-06-16T21:33:41.776+00:00 INFO CBAS.cbas analytics driver is running; pid: 452
2020-06-16 21:33:44,463 main WARN Recursive call to getLogger for javax.management.mbeanserver ignored.
2020-06-16T21:33:45.966+00:00 INFO CBAS.util.LoggingConfigUtil [main] Setting org.apache.asterix log level to DEBUG
2020-06-16T21:33:45.978+00:00 INFO CBAS.bootstrap.CCApplication [main] Starting Asterix cluster controller
2020-06-16T21:33:47.406+00:00 INFO CBAS.util.SingleThreadEventProcessor [ActiveNotificationHandler] Started ActiveNotificationHandler
2020-06-16T21:33:47.430+00:00 WARN CBAS.config.ConfigManager [main] NC option [nc] storage.compression.block being accessed outside of NC-scoped configuration.
2020-06-16T21:33:47.438+00:00 WARN CBAS.config.ConfigManager [main] NC option [nc] storage.compression.block being accessed outside of NC-scoped configuration.
2020-06-16T21:33:47.446+00:00 WARN CBAS.config.ConfigManager [main] NC option [nc] analytics.node.name being accessed outside of NC-scoped configuration.
2020-06-16T21:33:47.516+00:00 INFO CBAS.bootstrap.AsterixStateProxy [main] Asterix Distributed State Proxy Bound
2020-06-16T21:33:49.256+00:00 INFO CBAS.bootstrap.ClusterLifecycleListener [main] Starting cluster event handler
2020-06-16T21:33:49.456+00:00 INFO CBAS.cc.ClusterControllerService [main] Started ClusterControllerService
2020-06-16T21:33:49.563+00:00 INFO CBAS.nc.NodeControllerService [main] Starting NodeControllerService
2020-06-16T21:33:49.733+00:00 INFO CBAS.trace.Tracer [main] Initialize Tracer org.apache.hyracks.util.trace.Tracer.Traces.a771316973056c9759aee152c7c79f8b
2020-06-16T21:33:49.738+00:00 INFO CBAS.trace.Tracer [main] Set categories for Tracer org.apache.hyracks.util.trace.Tracer.Traces.a771316973056c9759aee152c7c79f8b to []
2020-06-16T21:33:49.739+00:00 INFO CBAS.util.LoggingConfigUtil [main] org.apache.hyracks log level is DEBUG
2020-06-16T21:33:49.741+00:00 INFO CBAS.util.LoggingConfigUtil [main] org.apache.asterix log level is DEBUG
2020-06-16T21:33:49.746+00:00 INFO CBAS.bootstrap.AnalyticsApplicationUtil [main] Setting analytics root log level to DEBUG
2020-06-16T21:33:49.747+00:00 INFO CBAS.bootstrap.AnalyticsApplicationUtil [main] Found JRE version 11.0.6
2020-06-16T21:33:49.894+00:00 INFO CBAS.config.PropertiesAccessor [main] Build properties not found on classpath. Version API will return empty object
2020-06-16T21:33:49.925+00:00 INFO CBAS.bootstrap.AnalyticsNCApplication [main] Starting Couchbase Analytics driver, version: {"build.date":"Thu Apr 16 19:18:56 UTC 2020","build.number":"6299","build.version":"6.5.1-6299"}
2020-06-16T21:33:49.953+00:00 INFO CBAS.bootstrap.NCApplication [main] Starting Asterix node controller: a771316973056c9759aee152c7c79f8b
2020-06-16T21:33:50.238+00:00 INFO CBAS.nc.TransactionSubsystem [main] Checkpoint Properties: {"class" : "CheckpointProperties", "checkpoint-dir-path" : "/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/txn-log", "lsn-threshold" : 67108864, "poll-frequency" : 120, "history-to-keep" : 2, "dataset-checkpoint-interval" : 3600}
2020-06-16T21:33:50.252+00:00 INFO CBAS.recovery.AbstractCheckpointManager [main] Checkpoint directory = /opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/txn-log
2020-06-16T21:33:50.258+00:00 INFO CBAS.recovery.AbstractCheckpointManager [main] Checkpoint directory /opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/txn-log/ didn't exist. Creating one
2020-06-16T21:33:50.260+00:00 INFO CBAS.recovery.AbstractCheckpointManager [main] Getting latest checkpoint
2020-06-16T21:33:50.299+00:00 INFO CBAS.recovery.AbstractCheckpointManager [main] Listing of files in the checkpoint dir returned empty
2020-06-16T21:33:50.392+00:00 INFO CBAS.logging.LogManager [main] the log dir (/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/txn-log) is empty. returning empty list
2020-06-16T21:33:50.468+00:00 INFO CBAS.logging.LogManager [main] Created log file /opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/txn-log/transaction_log_0
2020-06-16T21:33:50.476+00:00 INFO CBAS.logging.LogManager [main] initializing log anchor with log file Id: 0 at offset: 0
2020-06-16T21:33:50.484+00:00 INFO CBAS.logging.LogManager [main] LogManager starts logging in LSN: 0
2020-06-16T21:33:50.553+00:00 INFO CBAS.recovery.AbstractCheckpointManager [main] Getting latest checkpoint
2020-06-16T21:33:50.566+00:00 INFO CBAS.recovery.AbstractCheckpointManager [main] Listing of files in the checkpoint dir returned empty
2020-06-16T21:33:50.576+00:00 INFO CBAS.nc.RecoveryManager [main] The checkpoint file doesn't exist: systemState = PERMANENT_DATA_LOSS
2020-06-16T21:33:50.584+00:00 WARN CBAS.nc.NCAppRuntimeContext [main] Deleting the storage dir. initialRun = false, systemState = PERMANENT_DATA_LOSS
2020-06-16T21:33:50.873+00:00 INFO CBAS.recovery.AbstractCheckpointManager [main] Getting latest checkpoint
2020-06-16T21:33:50.892+00:00 INFO CBAS.recovery.AbstractCheckpointManager [main] Listing of files in the checkpoint dir returned empty
2020-06-16T21:33:50.894+00:00 INFO CBAS.recovery.AbstractCheckpointManager [main] Getting latest checkpoint
2020-06-16T21:33:50.903+00:00 INFO CBAS.recovery.AbstractCheckpointManager [main] Listing of files in the checkpoint dir returned empty
2020-06-16T21:33:50.906+00:00 INFO CBAS.nc.RecoveryManager [main] The checkpoint file doesn't exist: systemState = PERMANENT_DATA_LOSS
2020-06-16T21:33:50.908+00:00 INFO CBAS.bootstrap.NCApplication [main] System state: PERMANENT_DATA_LOSS
2020-06-16T21:33:50.914+00:00 INFO CBAS.bootstrap.NCApplication [main] Node ID: a771316973056c9759aee152c7c79f8b
2020-06-16T21:33:50.918+00:00 INFO CBAS.bootstrap.NCApplication [main] Stores: {a771316973056c9759aee152c7c79f8b=[/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/storage]}
2020-06-16T21:33:51.210+00:00 INFO CBAS.nc.NodeControllerService [main] addCc: /127.0.0.1:9112
2020-06-16T21:33:51.258+00:00 INFO CBAS.nc.NodeControllerService [main] Registering with Cluster Controller ClusterControllerRemoteProxy [/127.0.0.1:9112]
2020-06-16T21:33:51.514+00:00 INFO CBAS.work.RegisterNodeWork [Worker:ClusterController] registering node: a771316973056c9759aee152c7c79f8b
2020-06-16T21:33:51.542+00:00 WARN CBAS.cluster.NodeManager [Worker:ClusterController] +addNode: a771316973056c9759aee152c7c79f8b
2020-06-16T21:33:51.559+00:00 INFO CBAS.cluster.NodeManager [Worker:ClusterController] adding node to registry
2020-06-16T21:33:51.561+00:00 INFO CBAS.cluster.NodeManager [Worker:ClusterController] updating cluster capacity
2020-06-16T21:33:51.572+00:00 INFO CBAS.work.RegisterNodeWork [Worker:ClusterController] registered node: a771316973056c9759aee152c7c79f8b
2020-06-16T21:33:51.577+00:00 INFO CBAS.bootstrap.ClusterLifecycleListener [Worker:ClusterController] NC: a771316973056c9759aee152c7c79f8b joined
2020-06-16T21:33:51.602+00:00 INFO CBAS.utils.ClusterStateManager [Worker:ClusterController] Registering configuration parameters for node id a771316973056c9759aee152c7c79f8b
2020-06-16T21:33:51.947+00:00 INFO CBAS.nc.NodeControllerService [main] Registering with Cluster Controller ClusterControllerRemoteProxy [/127.0.0.1:9112] completed
2020-06-16T21:33:51.982+00:00 INFO CBAS.work.AbortAllJobsWork [Worker:a771316973056c9759aee152c7c79f8b] Aborting all tasks for controller CC:0
2020-06-16T21:33:51.990+00:00 INFO CBAS.nc.NodeControllerService [main] Started NodeControllerService
2020-06-16T21:33:52.025+00:00 INFO CBAS.util.ExitUtil [main] successfully registered shutdown hook Thread[ShutdownHook-a771316973056c9759aee152c7c79f8b,5,main]
2020-06-16T21:33:52.114+00:00 INFO CBAS.work.EnsureAllCcTasksCompleted [Executor-10:a771316973056c9759aee152c7c79f8b] Ensuring all tasks of CC CC:0 have completed
2020-06-16T21:33:52.316+00:00 INFO CBAS.work.EnsureAllCcTasksCompleted [Executor-10:a771316973056c9759aee152c7c79f8b] all tasks of CC CC:0 have completed
2020-06-16T21:33:58.613+00:00 WARN CBAS.server.AnalyticsHttpsServerInitializer [main] Configured SSL Context using configuration {"certificatePath":"/opt/couchbase/var/lib/couchbase/config/memcached-cert.pem","privateKeyPath":"/opt/couchbase/var/lib/couchbase/config/memcached-key.pem","clientCertAuthType":"NONE","supportedCiphers":["TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384","TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256","TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384","TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256","TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA","TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA","TLS_RSA_WITH_AES_256_CBC_SHA","TLS_RSA_WITH_AES_128_CBC_SHA"],"minTlsVersion":1.0,"preferServerCipherSuites":true,"supportedProtocols":["TLSv1","TLSv1.1","TLSv1.2"],"clientAuth":"NONE"} and native openssl version: BoringSSL-269484159
2020-06-16T21:33:58.641+00:00 INFO CBAS.bootstrap.NsServerHelper [main] starting coordinator service
2020-06-16T21:33:58.641+00:00 INFO CBAS.recovery.AbstractCheckpointManager [Executor-10:a771316973056c9759aee152c7c79f8b] Getting latest checkpoint
2020-06-16T21:33:58.651+00:00 INFO CBAS.cbas starting coordinator
2020-06-16T21:33:58.651+00:00 INFO CBAS.cbas Starting replicas monitor
2020-06-16T21:33:58.651+00:00 INFO CBAS.bootstrap.NsServerHelper [main] Coordinator service started
2020-06-16T21:33:58.654+00:00 INFO CBAS.bootstrap.DeadlockWatchdog [main] The deadlock watchdog started at 300s frequency
2020-06-16T21:33:58.714+00:00 INFO CBAS.recovery.AbstractCheckpointManager [Executor-10:a771316973056c9759aee152c7c79f8b] Listing of files in the checkpoint dir returned empty
2020-06-16T21:33:58.714+00:00 INFO CBAS.nc.RecoveryManager [Executor-10:a771316973056c9759aee152c7c79f8b] The checkpoint file doesn't exist: systemState = PERMANENT_DATA_LOSS
2020-06-16T21:33:58.736+00:00 INFO CBAS.bootstrap.PeriodicThreadDump [main] Periodic thread dumps will be logged at DEBUG level every 300 seconds
2020-06-16T21:33:58.750+00:00 INFO CBAS.messaging.CCMessageBroker [Executor-2:ClusterController] Received message: org.apache.asterix.app.replication.message.RegistrationTasksRequestMessage@30f6b3ed
2020-06-16T21:33:58.751+00:00 INFO CBAS.replication.NcLifecycleCoordinator [Executor-2:ClusterController] Building registration tasks for node a771316973056c9759aee152c7c79f8b with status IDLE and system state: BOOTSTRAPPING
2020-06-16T21:33:58.789+00:00 INFO CBAS.messaging.NCMessageBroker [Worker:a771316973056c9759aee152c7c79f8b] Received message: org.apache.asterix.app.replication.message.RegistrationTasksResponseMessage@409298a4
2020-06-16T21:33:58.794+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Starting startup task: { "class" : "UpdateNodeStatusTask" }
2020-06-16T21:33:58.795+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Completed startup task: { "class" : "UpdateNodeStatusTask" }
2020-06-16T21:33:58.795+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Starting startup task: { "class" : "StartReplicationServiceTask" }
2020-06-16T21:33:58.797+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Completed startup task: { "class" : "StartReplicationServiceTask" }
2020-06-16T21:33:58.799+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Starting startup task: { "class" : "MetadataBootstrapTask" }
2020-06-16T21:33:58.810+00:00 INFO CBAS.recovery.AbstractCheckpointManager [Executor-10:a771316973056c9759aee152c7c79f8b] Getting latest checkpoint
2020-06-16T21:33:58.815+00:00 INFO CBAS.recovery.AbstractCheckpointManager [Executor-10:a771316973056c9759aee152c7c79f8b] Listing of files in the checkpoint dir returned empty
2020-06-16T21:33:58.816+00:00 INFO CBAS.nc.RecoveryManager [Executor-10:a771316973056c9759aee152c7c79f8b] The checkpoint file doesn't exist: systemState = PERMANENT_DATA_LOSS
2020-06-16T21:33:58.816+00:00 INFO CBAS.nc.NCAppRuntimeContext [Executor-10:a771316973056c9759aee152c7c79f8b] Bootstrapping metadata
2020-06-16T21:33:58.819+00:00 INFO CBAS.management.ReplicationChannel [a771316973056c9759aee152c7c79f8b Replication Channel Thread] opened Replication Channel @ IP Address: 0.0.0.0:9120
2020-06-16T21:33:59.011+00:00 INFO CBAS.metadata.CachingTxnIdFactory [Executor-10:a771316973056c9759aee152c7c79f8b] block exhausted; obtaining new block from supplier
2020-06-16T21:33:59.047+00:00 INFO CBAS.messaging.CCMessageBroker [Executor-2:ClusterController] Received message: TxnIdBlockRequest
2020-06-16T21:33:59.063+00:00 INFO CBAS.messaging.NCMessageBroker [Worker:a771316973056c9759aee152c7c79f8b] Received message: TxnIdBlockResponse
2020-06-16T21:33:59.093+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(1)
2020-06-16T21:33:59.763+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(2)
2020-06-16T21:33:59.961+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(3)
2020-06-16T21:34:00.404+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(4)
2020-06-16T21:34:00.640+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(5)
2020-06-16T21:34:00.862+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(6)
2020-06-16T21:34:01.181+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(7)
2020-06-16T21:34:01.384+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(8)
2020-06-16T21:34:01.606+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(10)
2020-06-16T21:34:01.785+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(12)
2020-06-16T21:34:02.064+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(9)
2020-06-16T21:34:02.489+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(13)
2020-06-16T21:34:03.236+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(14)
2020-06-16T21:34:03.841+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(11)
2020-06-16T21:34:04.591+00:00 INFO CBAS.bootstrap.MetadataBootstrap [Executor-10:a771316973056c9759aee152c7c79f8b] Finished enlistment of metadata B-trees in new universe
2020-06-16T21:34:05.443+00:00 INFO CBAS.bootstrap.MetadataBootstrap [Executor-10:a771316973056c9759aee152c7c79f8b] Finished inserting initial datasets.
2020-06-16T21:34:05.798+00:00 INFO CBAS.bootstrap.MetadataBootstrap [Executor-10:a771316973056c9759aee152c7c79f8b] Finished inserting initial datatypes.
2020-06-16T21:34:05.928+00:00 INFO CBAS.bootstrap.MetadataBootstrap [Executor-10:a771316973056c9759aee152c7c79f8b] Finished inserting built-in adapters.
2020-06-16T21:34:06.353+00:00 INFO CBAS.feeds.BuiltinFeedPolicies [Executor-10:a771316973056c9759aee152c7c79f8b] Finished adding built-in feed policies.
2020-06-16T21:34:06.541+00:00 INFO CBAS.bootstrap.MetadataBootstrap [Executor-10:a771316973056c9759aee152c7c79f8b] Finished creating metadata B-trees.
2020-06-16T21:34:06.637+00:00 INFO CBAS.bootstrap.MetadataBootstrap [Executor-10:a771316973056c9759aee152c7c79f8b] Starting DDL recovery ...
2020-06-16T21:34:07.287+00:00 INFO CBAS.bootstrap.MetadataBootstrap [Executor-10:a771316973056c9759aee152c7c79f8b] Completed DDL recovery.
2020-06-16T21:34:07.338+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(53)
2020-06-16T21:34:08.315+00:00 INFO CBAS.context.DatasetMemoryManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reserved(1048576) for dataset(52)
2020-06-16T21:34:09.563+00:00 INFO CBAS.bootstrap.MetadataBootstrap [Executor-10:a771316973056c9759aee152c7c79f8b] Finished inserting initial datasets.
2020-06-16T21:34:09.819+00:00 INFO CBAS.nc.NCAppRuntimeContext [Executor-10:a771316973056c9759aee152c7c79f8b] Metadata node bound
2020-06-16T21:34:09.829+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Completed startup task: { "class" : "MetadataBootstrapTask" }
2020-06-16T21:34:09.852+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Starting startup task: { "class" : "ExternalLibrarySetupTask", "metadata-node" : true }
2020-06-16T21:34:09.885+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Completed startup task: { "class" : "ExternalLibrarySetupTask", "metadata-node" : true }
2020-06-16T21:34:09.896+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Starting startup task: { "class" : "CheckpointTask" }
2020-06-16T21:34:09.902+00:00 INFO CBAS.recovery.CheckpointManager [Executor-10:a771316973056c9759aee152c7c79f8b] Starting sharp checkpoint...
2020-06-16T21:34:10.202+00:00 INFO CBAS.impls.AbstractLSMIndex [Executor-12:a771316973056c9759aee152c7c79f8b] Flushing component with id: [1,1] in the index {"class" : "LSMBTree", "dir" : "/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/storage/partition_0/Metadata/Dataverse/0/Dataverse", "memory" : [{"class":"LSMBTreeMemoryComponent", "state":"READABLE_UNWRITABLE_FLUSHING", "writers":0, "readers":1, "pendingFlushes":0, "id":"[1,1]"}, {"class":"LSMBTreeMemoryComponent", "state":"INACTIVE", "writers":0, "readers":0, "pendingFlushes":0, "id":"null"}], "disk" : 0, "num-scheduled-flushes":1, "current-memory-component":1}
2020-06-16T21:34:10.547+00:00 INFO CBAS.server.QueryServiceServlet [HttpExecutor(port:8095)-0] handleRequest: <ud>{"host":"localhost:8091","path":"/query/service","statement":"with user_datasets as (select value d from Metadata.`Dataset` d where d.DataverseName <> \\\"Metadata\\\") select (select value count(*) from user_datasets d group by d.BucketName) as datasets_per_bucket, (select value count(*) from user_datasets d group by d.DataverseName) as datasets_per_dataverse, (select value count(distinct d.UUID) from Metadata.`Bucket` d where d.IsRunning) as connected_buckets;","pretty":false,"mode":"immediate","clientContextID":null,"format":"CLEAN_JSON","timeout":9223372036854775807,"maxResultReads":1,"planFormat":"JSON","expressionTree":false,"rewrittenExpressionTree":false,"logicalPlan":false,"optimizedLogicalPlan":false,"job":false,"profile":"counts","signature":true,"multiStatement":true,"parseOnly":false,"readOnly":false,"maxWarnings":0,"scanConsistency":null,"scanWait":null}</ud>
2020-06-16T21:34:10.965+00:00 INFO CBAS.impls.AbstractLSMIndex [Executor-12:a771316973056c9759aee152c7c79f8b] Flushing component with id: [1,1] in the index {"class" : "LSMBTree", "dir" : "/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/storage/partition_0/Metadata/Dataset/0/Dataset", "memory" : [{"class":"LSMBTreeMemoryComponent", "state":"READABLE_UNWRITABLE_FLUSHING", "writers":0, "readers":1, "pendingFlushes":0, "id":"[1,1]"}, {"class":"LSMBTreeMemoryComponent", "state":"INACTIVE", "writers":0, "readers":0, "pendingFlushes":0, "id":"null"}], "disk" : 0, "num-scheduled-flushes":1, "current-memory-component":1}
2020-06-16T21:34:11.357+00:00 INFO CBAS.messaging.CCMessageBroker [Executor-2:ClusterController] Received message: ExecuteStatementRequestMessage(id=1, from=a771316973056c9759aee152c7c79f8b): <ud>with user_datasets as (select value d from Metadata.`Dataset` d where d.DataverseName <> "Metadata") select (select value count(*) from user_datasets d group by d.BucketName) as datasets_per_bucket, (select value count(*) from user_datasets d group by d.DataverseName) as datasets_per_dataverse, (select value count(distinct d.UUID) from Metadata.`Bucket` d where d.IsRunning) as connected_buckets;;</ud>
2020-06-16T21:34:11.570+00:00 INFO CBAS.impls.AbstractLSMIndex [Executor-12:a771316973056c9759aee152c7c79f8b] Flushing component with id: [1,1] in the index {"class" : "LSMBTree", "dir" : "/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/storage/partition_0/Metadata/Datatype/0/Datatype", "memory" : [{"class":"LSMBTreeMemoryComponent", "state":"READABLE_UNWRITABLE_FLUSHING", "writers":0, "readers":1, "pendingFlushes":0, "id":"[1,1]"}, {"class":"LSMBTreeMemoryComponent", "state":"INACTIVE", "writers":0, "readers":0, "pendingFlushes":0, "id":"null"}], "disk" : 0, "num-scheduled-flushes":1, "current-memory-component":1}
2020-06-16T21:34:11.663+00:00 INFO CBAS.messaging.NCMessageBroker [Worker:a771316973056c9759aee152c7c79f8b] Received message: ExecuteStatementResponseMessage(id=1): 0 characters
2020-06-16T21:34:11.677+00:00 WARN CBAS.server.QueryServiceServlet [HttpExecutor(port:8095)-0] handleException: ASX0032: Cannot execute request, cluster is UNUSABLE: <ud>{"host":"localhost:8091","path":"/query/service","statement":"with user_datasets as (select value d from Metadata.`Dataset` d where d.DataverseName <> \\\"Metadata\\\") select (select value count(*) from user_datasets d group by d.BucketName) as datasets_per_bucket, (select value count(*) from user_datasets d group by d.DataverseName) as datasets_per_dataverse, (select value count(distinct d.UUID) from Metadata.`Bucket` d where d.IsRunning) as connected_buckets;","pretty":false,"mode":"immediate","clientContextID":null,"format":"CLEAN_JSON","timeout":9223372036854775807,"maxResultReads":1,"planFormat":"JSON","expressionTree":false,"rewrittenExpressionTree":false,"logicalPlan":false,"optimizedLogicalPlan":false,"job":false,"profile":"counts","signature":true,"multiStatement":false,"parseOnly":false,"readOnly":false,"maxWarnings":0,"scanConsistency":null,"scanWait":null}</ud>
2020-06-16T21:34:12.073+00:00 INFO CBAS.impls.AbstractLSMIndex [Executor-12:a771316973056c9759aee152c7c79f8b] Flushing component with id: [1,1] in the index {"class" : "LSMBTree", "dir" : "/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/storage/partition_0/Metadata/Index/0/Index", "memory" : [{"class":"LSMBTreeMemoryComponent", "state":"READABLE_UNWRITABLE_FLUSHING", "writers":0, "readers":1, "pendingFlushes":0, "id":"[1,1]"}, {"class":"LSMBTreeMemoryComponent", "state":"INACTIVE", "writers":0, "readers":0, "pendingFlushes":0, "id":"null"}], "disk" : 0, "num-scheduled-flushes":1, "current-memory-component":1}
2020-06-16T21:34:12.574+00:00 INFO CBAS.impls.AbstractLSMIndex [Executor-12:a771316973056c9759aee152c7c79f8b] Flushing component with id: [1,1] in the index {"class" : "LSMBTree", "dir" : "/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/storage/partition_0/Metadata/Node/0/Node", "memory" : [{"class":"LSMBTreeMemoryComponent", "state":"READABLE_UNWRITABLE_FLUSHING", "writers":0, "readers":1, "pendingFlushes":0, "id":"[1,1]"}, {"class":"LSMBTreeMemoryComponent", "state":"INACTIVE", "writers":0, "readers":0, "pendingFlushes":0, "id":"null"}], "disk" : 0, "num-scheduled-flushes":1, "current-memory-component":1}
2020-06-16T21:34:13.027+00:00 INFO CBAS.impls.AbstractLSMIndex [Executor-12:a771316973056c9759aee152c7c79f8b] Flushing component with id: [1,1] in the index {"class" : "LSMBTree", "dir" : "/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/storage/partition_0/Metadata/Nodegroup/0/Nodegroup", "memory" : [{"class":"LSMBTreeMemoryComponent", "state":"READABLE_UNWRITABLE_FLUSHING", "writers":0, "readers":1, "pendingFlushes":0, "id":"[1,1]"}, {"class":"LSMBTreeMemoryComponent", "state":"INACTIVE", "writers":0, "readers":0, "pendingFlushes":0, "id":"null"}], "disk" : 0, "num-scheduled-flushes":1, "current-memory-component":1}
2020-06-16T21:34:13.385+00:00 INFO CBAS.impls.AbstractLSMIndex [Executor-12:a771316973056c9759aee152c7c79f8b] Flushing component with id: [1,1] in the index {"class" : "LSMBTree", "dir" : "/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/storage/partition_0/Metadata/DatasourceAdapter/0/DatasourceAdapter", "memory" : [{"class":"LSMBTreeMemoryComponent", "state":"READABLE_UNWRITABLE_FLUSHING", "writers":0, "readers":1, "pendingFlushes":0, "id":"[1,1]"}, {"class":"LSMBTreeMemoryComponent", "state":"INACTIVE", "writers":0, "readers":0, "pendingFlushes":0, "id":"null"}], "disk" : 0, "num-scheduled-flushes":1, "current-memory-component":1}
2020-06-16T21:34:13.628+00:00 INFO CBAS.impls.AbstractLSMIndex [Executor-12:a771316973056c9759aee152c7c79f8b] Flushing component with id: [1,1] in the index {"class" : "LSMBTree", "dir" : "/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/storage/partition_0/Metadata/FeedPolicy/0/FeedPolicy", "memory" : [{"class":"LSMBTreeMemoryComponent", "state":"READABLE_UNWRITABLE_FLUSHING", "writers":0, "readers":1, "pendingFlushes":0, "id":"[1,1]"}, {"class":"LSMBTreeMemoryComponent", "state":"INACTIVE", "writers":0, "readers":0, "pendingFlushes":0, "id":"null"}], "disk" : 0, "num-scheduled-flushes":1, "current-memory-component":1}
2020-06-16T21:34:13.765+00:00 INFO CBAS.impls.AbstractLSMIndex [Executor-12:a771316973056c9759aee152c7c79f8b] Flushing component with id: [1,1] in the index {"class" : "LSMBTree", "dir" : "/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/storage/partition_0/Metadata/CompactionPolicy/0/CompactionPolicy", "memory" : [{"class":"LSMBTreeMemoryComponent", "state":"READABLE_UNWRITABLE_FLUSHING", "writers":0, "readers":1, "pendingFlushes":0, "id":"[1,1]"}, {"class":"LSMBTreeMemoryComponent", "state":"INACTIVE", "writers":0, "readers":0, "pendingFlushes":0, "id":"null"}], "disk" : 0, "num-scheduled-flushes":1, "current-memory-component":1}
2020-06-16T21:34:13.976+00:00 INFO CBAS.impls.AbstractLSMIndex [Executor-12:a771316973056c9759aee152c7c79f8b] Flushing component with id: [1,1] in the index {"class" : "LSMBTree", "dir" : "/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/storage/partition_0/Metadata/Link/0/Link", "memory" : [{"class":"LSMBTreeMemoryComponent", "state":"READABLE_UNWRITABLE_FLUSHING", "writers":0, "readers":1, "pendingFlushes":0, "id":"[1,1]"}, {"class":"LSMBTreeMemoryComponent", "state":"INACTIVE", "writers":0, "readers":0, "pendingFlushes":0, "id":"null"}], "disk" : 0, "num-scheduled-flushes":1, "current-memory-component":1}
2020-06-16T21:34:14.166+00:00 INFO CBAS.recovery.AbstractCheckpointManager [Executor-10:a771316973056c9759aee152c7c79f8b] Listing of files in the checkpoint dir returned empty
2020-06-16T21:34:14.170+00:00 INFO CBAS.recovery.AbstractCheckpointManager [Executor-10:a771316973056c9759aee152c7c79f8b] Persisting checkpoint file to /opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/txn-log/checkpoint_0 which doesn't exist yet
2020-06-16T21:34:14.202+00:00 INFO CBAS.recovery.AbstractCheckpointManager [Executor-10:a771316973056c9759aee152c7c79f8b] Completed persisting checkpoint file to /opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/txn-log/checkpoint_0 which now exists
2020-06-16T21:34:14.209+00:00 INFO CBAS.recovery.AbstractCheckpointManager [Executor-10:a771316973056c9759aee152c7c79f8b] Listing of files in the checkpoint dir returned [/opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/txn-log/checkpoint_0]
2020-06-16T21:34:14.214+00:00 WARN CBAS.recovery.AbstractCheckpointManager [Executor-10:a771316973056c9759aee152c7c79f8b] Reading checkpoint file: /opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/txn-log/checkpoint_0
2020-06-16T21:34:14.232+00:00 INFO CBAS.logging.LogManager [Executor-10:a771316973056c9759aee152c7c79f8b] Terminating LogFlusher thread ...
2020-06-16T21:34:14.254+00:00 INFO CBAS.logging.LogManager [Executor-10:a771316973056c9759aee152c7c79f8b] LogFlusher thread is terminated.
2020-06-16T21:34:14.260+00:00 INFO CBAS.logging.LogManager [Executor-10:a771316973056c9759aee152c7c79f8b] closing current log file with id(0)
2020-06-16T21:34:14.289+00:00 INFO CBAS.logging.LogManager [Executor-10:a771316973056c9759aee152c7c79f8b] Created log file /opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/txn-log/transaction_log_1
2020-06-16T21:34:14.304+00:00 INFO CBAS.logging.LogManager [Executor-10:a771316973056c9759aee152c7c79f8b] Deleted log file /opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/txn-log/transaction_log_0
2020-06-16T21:34:14.315+00:00 INFO CBAS.logging.LogManager [Executor-10:a771316973056c9759aee152c7c79f8b] initializing log anchor with log file Id: 1 at offset: 0
2020-06-16T21:34:14.316+00:00 INFO CBAS.logging.LogManager [Executor-10:a771316973056c9759aee152c7c79f8b] LogManager starts logging in LSN: 268435456
2020-06-16T21:34:14.325+00:00 INFO CBAS.recovery.CheckpointManager [Executor-10:a771316973056c9759aee152c7c79f8b] Completed sharp checkpoint.
2020-06-16T21:34:14.328+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Completed startup task: { "class" : "CheckpointTask" }
2020-06-16T21:34:14.331+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Starting startup task: { "class" : "StartLifecycleComponentsTask" }
2020-06-16T21:34:14.332+00:00 INFO CBAS.task.StartLifecycleComponentsTask [Executor-10:a771316973056c9759aee152c7c79f8b] Starting lifecycle components
2020-06-16T21:34:14.333+00:00 INFO CBAS.task.StartLifecycleComponentsTask [Executor-10:a771316973056c9759aee152c7c79f8b] Coredump directory for NC is: /opt/couchbase/var/lib/couchbase/data/@analytics/v_iodevice_0/coredump
2020-06-16T21:34:14.336+00:00 INFO CBAS.lifecycle.LifeCycleComponentManager [Executor-10:a771316973056c9759aee152c7c79f8b] LifecycleComponentManager configured org.apache.hyracks.api.lifecycle.LifeCycleComponentManager@34506f27
2020-06-16T21:34:14.339+00:00 INFO CBAS.task.StartLifecycleComponentsTask [Executor-10:a771316973056c9759aee152c7c79f8b] Configured:org.apache.hyracks.api.lifecycle.LifeCycleComponentManager@34506f27
2020-06-16T21:34:14.349+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Completed startup task: { "class" : "StartLifecycleComponentsTask" }
2020-06-16T21:34:14.350+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Starting startup task: { "class" : "ExportMetadataNodeTask", "export-stub" : true }
2020-06-16T21:34:14.497+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Completed startup task: { "class" : "ExportMetadataNodeTask", "export-stub" : true }
2020-06-16T21:34:14.499+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Starting startup task: { "class" : "BindMetadataNodeTask" }
2020-06-16T21:34:14.552+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Completed startup task: { "class" : "BindMetadataNodeTask" }
2020-06-16T21:34:14.552+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Starting startup task: { "class" : "UpdateNodeStatusTask" }
2020-06-16T21:34:14.552+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Completed startup task: { "class" : "UpdateNodeStatusTask" }
2020-06-16T21:34:14.552+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Starting startup task: { "class" : "CheckRebalanceRequiredTask" }
2020-06-16T21:34:15.921+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Completed startup task: { "class" : "CheckRebalanceRequiredTask" }
2020-06-16T21:34:15.922+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Starting startup task: com.couchbase.analytics.bootstrap.RegisterProxyablePrefixesTask@242d847f
2020-06-16T21:34:15.948+00:00 INFO CBAS.message.RegistrationTasksResponseMessage [Executor-10:a771316973056c9759aee152c7c79f8b] Completed startup task: com.couchbase.analytics.bootstrap.RegisterProxyablePrefixesTask@242d847f
2020-06-16T21:34:17.081+00:00 INFO CBAS.messaging.CCMessageBroker [Executor-2:ClusterController] Received message: org.apache.asterix.app.replication.message.NCLifecycleTaskReportMessage@6a751d90
2020-06-16T21:34:17.091+00:00 INFO CBAS.utils.ClusterStateManager [Executor-2:ClusterController] Metadata node a771316973056c9759aee152c7c79f8b is now active
2020-06-16T21:34:17.101+00:00 INFO CBAS.utils.ClusterStateManager [Executor-2:ClusterController] updating cluster state from UNUSABLE to PENDING
2020-06-16T21:34:17.103+00:00 INFO CBAS.utils.ClusterStateManager [Executor-2:ClusterController] Cluster State is now PENDING
2020-06-16T21:34:17.104+00:00 INFO CBAS.utils.ClusterStateManager [Executor-2:ClusterController] updating cluster state from PENDING to RECOVERING
2020-06-16T21:34:17.105+00:00 INFO CBAS.utils.ClusterStateManager [Executor-2:ClusterController] Cluster State is now RECOVERING
2020-06-16T21:34:17.115+00:00 INFO CBAS.bootstrap.GlobalRecoveryManager [Executor-3:ClusterController] Starting Global Recovery
2020-06-16T21:34:17.139+00:00 INFO CBAS.rebalance.ReplicationUtil [Executor-3:ClusterController] Current replicas []
2020-06-16T21:34:17.142+00:00 WARN CBAS.rebalance.ReplicationUtil [Executor-3:ClusterController] Couldn't find additional candidate nodes for metadata replicas
2020-06-16T21:34:17.145+00:00 INFO CBAS.rebalance.ReplicationUtil [Executor-3:ClusterController] Refreshing state of replicas []
2020-06-16T21:34:17.146+00:00 INFO CBAS.rebalance.ReplicationUtil [Executor-3:ClusterController] Updating metadata replicas to: []
2020-06-16T21:34:17.277+00:00 INFO CBAS.bootstrap.GlobalRecoveryManager [Executor-3:ClusterController] Global Recovery Completed. Refreshing cluster state...
2020-06-16T21:34:17.278+00:00 INFO CBAS.utils.ClusterStateManager [Executor-3:ClusterController] updating cluster state from RECOVERING to ACTIVE
2020-06-16T21:34:17.281+00:00 INFO CBAS.utils.ClusterStateManager [Executor-3:ClusterController] Cluster State is now ACTIVE
2020-06-16T21:34:17.285+00:00 INFO CBAS.active.ActiveNotificationHandler [Executor-2:ClusterController] Starting active recovery
2020-06-16T21:35:53.295+00:00 INFO CBAS.server.QueryServiceServlet [HttpExecutor(port:8095)-1] handleRequest: <ud>{"host":"localhost:8091","path":"/query/service","statement":"with user_datasets as (select value d from Metadata.`Dataset` d where d.DataverseName <> \\\"Metadata\\\") select (select value count(*) from user_datasets d group by d.BucketName) as datasets_per_bucket, (select value count(*) from user_datasets d group by d.DataverseName) as datasets_per_dataverse, (select value count(distinct d.UUID) from Metadata.`Bucket` d where d.IsRunning) as connected_buckets;","pretty":false,"mode":"immediate","clientContextID":null,"format":"CLEAN_JSON","timeout":9223372036854775807,"maxResultReads":1,"planFormat":"JSON","expressionTree":false,"rewrittenExpressionTree":false,"logicalPlan":false,"optimizedLogicalPlan":false,"job":false,"profile":"counts","signature":true,"multiStatement":true,"parseOnly":false,"readOnly":false,"maxWarnings":0,"scanConsistency":null,"scanWait":null}</ud>
2020-06-16T21:35:53.336+00:00 INFO CBAS.messaging.CCMessageBroker [Executor-2:ClusterController] Received message: ExecuteStatementRequestMessage(id=2, from=a771316973056c9759aee152c7c79f8b): <ud>with user_datasets as (select value d from Metadata.`Dataset` d where d.DataverseName <> "Metadata") select (select value count(*) from user_datasets d group by d.BucketName) as datasets_per_bucket, (select value count(*) from user_datasets d group by d.DataverseName) as datasets_per_dataverse, (select value count(distinct d.UUID) from Metadata.`Bucket` d where d.IsRunning) as connected_buckets;;</ud>
2020-06-16T21:35:56.450+00:00 INFO CBAS.work.JobCleanupWork [Worker:ClusterController] Cleanup for job: JID:0.1
2020-06-16T21:35:56.525+00:00 INFO CBAS.messaging.NCMessageBroker [Worker:a771316973056c9759aee152c7c79f8b] Received message: ExecuteStatementResponseMessage(id=2): 51 characters
2020-06-16T21:38:52.088+00:00 INFO CBAS.server.QueryServiceServlet [HttpExecutor(port:8095)-2] handleRequest: <ud>{"host":"localhost:8091","path":"/query/service","statement":"with user_datasets as (select value d from Metadata.`Dataset` d where d.DataverseName <> \\\"Metadata\\\") select (select value count(*) from user_datasets d group by d.BucketName) as datasets_per_bucket, (select value count(*) from user_datasets d group by d.DataverseName) as datasets_per_dataverse, (select value count(distinct d.UUID) from Metadata.`Bucket` d where d.IsRunning) as connected_buckets;","pretty":false,"mode":"immediate","clientContextID":null,"format":"CLEAN_JSON","timeout":9223372036854775807,"maxResultReads":1,"planFormat":"JSON","expressionTree":false,"rewrittenExpressionTree":false,"logicalPlan":false,"optimizedLogicalPlan":false,"job":false,"profile":"counts","signature":true,"multiStatement":true,"parseOnly":false,"readOnly":false,"maxWarnings":0,"scanConsistency":null,"scanWait":null}</ud>
2020-06-16T21:38:52.163+00:00 INFO CBAS.messaging.CCMessageBroker [Executor-2:ClusterController] Received message: ExecuteStatementRequestMessage(id=3, from=a771316973056c9759aee152c7c79f8b): <ud>with user_datasets as (select value d from Metadata.`Dataset` d where d.DataverseName <> "Metadata") select (select value count(*) from user_datasets d group by d.BucketName) as datasets_per_bucket, (select value count(*) from user_datasets d group by d.DataverseName) as datasets_per_dataverse, (select value count(distinct d.UUID) from Metadata.`Bucket` d where d.IsRunning) as connected_buckets;;</ud>
2020-06-16T21:38:53.612+00:00 INFO CBAS.work.JobCleanupWork [Worker:ClusterController] Cleanup for job: JID:0.2
2020-06-16T21:38:53.639+00:00 INFO CBAS.messaging.NCMessageBroker [Worker:a771316973056c9759aee152c7c79f8b] Received message: ExecuteStatementResponseMessage(id=3): 51 characters
